{{define "feed"}}
<div class="space-y-4">
    {{if .FeedItems}}
    {{range .FeedItems}}
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
        <!-- Author row -->
        <div class="flex items-center gap-3 mb-3">
            {{if .Author.Avatar}}
            <img src="{{.Author.Avatar}}" alt="" class="w-10 h-10 rounded-full object-cover" />
            {{else}}
            <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center">
                <span class="text-gray-500 text-sm">?</span>
            </div>
            {{end}}
            <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2">
                    {{if .Author.DisplayName}}
                    <span class="font-medium text-gray-900 truncate">{{.Author.DisplayName}}</span>
                    {{end}}
                    <span class="text-gray-500 text-sm truncate">@{{.Author.Handle}}</span>
                </div>
                <span class="text-gray-400 text-sm">{{.TimeAgo}}</span>
            </div>
        </div>

        <!-- Brew info -->
        <div class="bg-gray-50 rounded-lg p-3">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-lg">☕</span>
                {{if .Brew.Method}}
                <span class="font-medium text-gray-800">{{.Brew.Method}}</span>
                {{else}}
                <span class="font-medium text-gray-800">Brew</span>
                {{end}}
                {{if hasValue .Brew.Rating}}
                <span class="ml-auto text-yellow-500">
                    ★ {{.Brew.Rating}}/10
                </span>
                {{end}}
            </div>
            
            <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                {{if hasTemp .Brew.Temperature}}
                <div>
                    <span class="text-gray-400">Temp:</span> {{formatTemp .Brew.Temperature}}
                </div>
                {{end}}
                {{if hasValue .Brew.TimeSeconds}}
                <div>
                    <span class="text-gray-400">Time:</span> {{formatTime .Brew.TimeSeconds}}
                </div>
                {{end}}
                {{if hasValue .Brew.WaterAmount}}
                <div>
                    <span class="text-gray-400">Water:</span> {{.Brew.WaterAmount}}g
                </div>
                {{end}}
                {{if .Brew.GrindSize}}
                <div>
                    <span class="text-gray-400">Grind:</span> {{.Brew.GrindSize}}
                </div>
                {{end}}
            </div>

            {{if .Brew.TastingNotes}}
            <div class="mt-2 text-sm text-gray-700 italic">
                "{{.Brew.TastingNotes}}"
            </div>
            {{end}}
        </div>
    </div>
    {{end}}
    {{else}}
    <div class="bg-gray-50 rounded-lg p-6 text-center text-gray-500">
        <p class="mb-2">No brews in the feed yet.</p>
        <p class="text-sm">Be the first to log a brew!</p>
    </div>
    {{end}}
</div>
{{end}}
