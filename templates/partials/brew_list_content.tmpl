{{define "brew_list_content"}}
{{if not .Brews}}
<div class="card card-inner text-center">
  {{if $.IsOwnProfile}}
  <p class="text-brown-800 text-lg mb-4 font-medium">No brews yet! Start tracking your coffee journey.</p>
  <a href="/brews/new"
    class="inline-block btn-primary py-3 px-6 rounded-lg shadow-lg hover:shadow-xl">
    Add Your First Brew
  </a>
  {{else}}
  <p class="text-brown-800 text-lg font-medium">No brews yet.</p>
  {{end}}
</div>
{{else}}
<div class="table-container overflow-x-auto">
  <table class="table">
    <thead class="table-header">
      <tr>
        <th class="table-th px-4">Date</th>
        <th class="table-th px-4">Bean</th>
        <th class="table-th px-4">Brewer</th>
        <th class="table-th px-4">Variables</th>
        <th class="table-th px-4">Notes</th>
        <th class="table-th px-4">Rating</th>
        <th class="table-th px-4">Actions</th>
      </tr>
    </thead>
    <tbody class="table-body">
      {{range .Brews}}
      <tr class="table-row">
        <!-- Date -->
        <td class="px-4 py-4 whitespace-nowrap text-sm text-brown-900 font-medium align-top">
          <div>{{.CreatedAt.Format "Jan 2"}}</div>
          <div class="text-xs text-brown-600">{{.CreatedAt.Format "2006"}}</div>
        </td>

        <!-- Bean (with all details) -->
        <td class="px-4 py-4 text-sm text-brown-900 align-top">
          {{if .Bean}}
          <div class="font-bold text-brown-900">
            {{if .Bean.Name}}{{.Bean.Name}}{{else}}{{.Bean.Origin}}{{end}}
          </div>
          {{if and .Bean.Roaster .Bean.Roaster.Name}}
          <div class="text-xs text-brown-700 mt-0.5">
            <span class="font-medium">{{.Bean.Roaster.Name}}</span>
          </div>
          {{end}}
          <div class="text-meta mt-0.5 flex flex-wrap gap-x-2 gap-y-0.5">
            {{if .Bean.Origin}}<span class="inline-flex items-center gap-0.5">üìç {{.Bean.Origin}}</span>{{end}}
            {{if .Bean.RoastLevel}}<span class="inline-flex items-center gap-0.5">üî• {{.Bean.RoastLevel}}</span>{{end}}
            {{if hasValue .CoffeeAmount}}<span class="inline-flex items-center gap-0.5">‚öñÔ∏è {{.CoffeeAmount}}g</span>{{end}}
          </div>
          {{else}}
          <span class="text-brown-400">-</span>
          {{end}}
        </td>

        <!-- Brewer -->
        <td class="px-4 py-4 text-sm text-brown-900 align-top">
          {{if .BrewerObj}}
          <div class="font-medium text-brown-900">{{.BrewerObj.Name}}</div>
          {{else if .Method}}
          <div class="font-medium text-brown-900">{{.Method}}</div>
          {{else}}
          <span class="text-brown-400">-</span>
          {{end}}
        </td>

        <!-- Variables (grouped) -->
        <td class="px-4 py-4 text-xs text-brown-700 align-top">
          <div class="space-y-1">
            {{if .GrinderObj}}
            <div><span class="text-label">Grinder:</span> {{.GrinderObj.Name}}{{if .GrindSize}} ({{.GrindSize}}){{end}}</div>
            {{else if .GrindSize}}
            <div><span class="text-label">Grind:</span> {{.GrindSize}}</div>
            {{end}}

            {{if hasTemp .Temperature}}
            <div><span class="text-label">Temp:</span> {{formatTemp .Temperature}}</div>
            {{end}}

            {{if .Pours}}
            <div><span class="text-label">Pours:</span></div>
            {{range .Pours}}
            <div class="pl-2 text-label">‚Ä¢ {{.WaterAmount}}g @ {{formatTime .TimeSeconds}}</div>
            {{end}}
            {{else if hasValue .WaterAmount}}
            <div><span class="text-label">Water:</span> {{.WaterAmount}}g</div>
            {{end}}

            {{if hasValue .TimeSeconds}}
            <div><span class="text-label">Time:</span> {{formatTime .TimeSeconds}}</div>
            {{end}}
          </div>
        </td>

        <!-- Tasting Notes -->
        <td class="px-4 py-4 text-xs text-brown-800 align-top max-w-xs">
          {{if .TastingNotes}}
          <div class="italic line-clamp-3">{{.TastingNotes}}</div>
          {{else}}
          <span class="text-brown-400">-</span>
          {{end}}
        </td>

        <!-- Rating -->
        <td class="px-4 py-4 whitespace-nowrap text-sm text-brown-900 align-top">
          {{if hasValue .Rating}}
          <span class="badge-rating-sm">
            ‚≠ê {{formatRating .Rating}}
          </span>
          {{else}}
          <span class="text-brown-400">-</span>
          {{end}}
        </td>

        <!-- Actions -->
        <td class="px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2 align-top">
          {{if $.IsOwnProfile}}
          <a href="/brews/{{.RKey}}"
            class="text-brown-700 hover:text-brown-900 font-medium">View</a>
          {{else if $.ProfileHandle}}
          <a href="/brews/{{.RKey}}?owner={{$.ProfileHandle}}"
            class="text-brown-700 hover:text-brown-900 font-medium">View</a>
          {{else}}
          <a href="/brews/{{.RKey}}"
            class="text-brown-700 hover:text-brown-900 font-medium">View</a>
          {{end}}
          {{if $.IsOwnProfile}}
          <a href="/brews/{{.RKey}}/edit"
            class="text-brown-700 hover:text-brown-900 font-medium">Edit</a>
          <button hx-delete="/brews/{{.RKey}}"
            hx-confirm="Are you sure you want to delete this brew?" hx-target="closest tr"
            hx-swap="outerHTML swap:1s" class="text-brown-600 hover:text-brown-800 font-medium">
            Delete
          </button>
          {{end}}
        </td>
      </tr>
      {{end}}
    </tbody>
  </table>
</div>
{{end}}
{{end}}
