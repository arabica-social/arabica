{{define "profile_content"}}
<!-- Stats data to be read by JavaScript -->
<div id="profile-stats-data" 
     data-brews="{{len .Brews}}" 
     data-beans="{{len .Beans}}" 
     data-roasters="{{len .Roasters}}" 
     data-grinders="{{len .Grinders}}" 
     data-brewers="{{len .Brewers}}"
     style="display: none;"></div>

<!-- Brews Tab -->
<div x-show="activeTab === 'brews'">
    {{template "brew_list_content" .}}
</div>

<!-- Beans Tab -->
<div x-show="activeTab === 'beans'" x-cloak class="space-y-6">
    <!-- Coffee Beans -->
    {{if .Beans}}
    <div>
        <h3 class="text-lg font-semibold text-brown-900 mb-3">‚òï Coffee Beans</h3>
        <div class="table-container overflow-x-auto">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th class="table-th whitespace-nowrap">Name</th>
                        <th class="table-th whitespace-nowrap">‚òï Roaster</th>
                        <th class="table-th whitespace-nowrap">üìç Origin</th>
                        <th class="table-th whitespace-nowrap">üî• Roast</th>
                        <th class="table-th whitespace-nowrap">üå± Process</th>
                        <th class="table-th whitespace-nowrap">üìù Description</th>
                    </tr>
                </thead>
                <tbody class="table-body">
                    {{range .Beans}}
                    <tr class="table-row">
                        <td class="px-6 py-4 text-sm font-bold text-brown-900">
                            {{if .Name}}{{.Name}}{{else}}{{.Origin}}{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if and .Roaster .Roaster.Name}}
                            {{.Roaster.Name}}
                            {{else}}
                            <span class="text-brown-400">-</span>
                            {{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .Origin}}{{.Origin}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .RoastLevel}}{{.RoastLevel}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .Process}}{{.Process}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-700 italic max-w-xs">
                            {{if .Description}}{{.Description}}{{else}}<span class="text-brown-400 not-italic">-</span>{{end}}
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{if $.IsOwnProfile}}
        <div class="mt-3 text-center">
            <button @click="editBean('', '', '', '', '', '', '')" class="inline-flex items-center gap-2 btn-primary text-sm shadow-md hover:shadow-lg">
                <span>+</span>
                <span>Add New Bean</span>
            </button>
        </div>
        {{end}}
    </div>
    {{end}}

    <!-- Roasters -->
    {{if .Roasters}}
    <div>
        <h3 class="text-lg font-semibold text-brown-900 mb-3">üè≠ Favorite Roasters</h3>
        <div class="table-container overflow-x-auto">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th class="table-th">Name</th>
                        <th class="table-th">üìç Location</th>
                        <th class="table-th">üåê Website</th>
                    </tr>
                </thead>
                <tbody class="table-body">
                    {{range .Roasters}}
                    <tr class="table-row">
                        <td class="px-6 py-4 text-sm font-bold text-brown-900">{{.Name}}</td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .Location}}{{.Location}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .Website}}
                            {{$safeWebsite := safeWebsiteURL .Website}}
                            {{if $safeWebsite}}
                            <a href="{{$safeWebsite}}" target="_blank" rel="noopener noreferrer" class="text-brown-700 hover:underline font-medium">Visit Site</a>
                            {{else}}
                            <span class="text-brown-400">-</span>
                            {{end}}
                            {{else}}
                            <span class="text-brown-400">-</span>
                            {{end}}
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{if $.IsOwnProfile}}
        <div class="mt-3 text-center">
            <button @click="editRoaster('', '', '', '')" class="inline-flex items-center gap-2 btn-primary text-sm shadow-md hover:shadow-lg">
                <span>+</span>
                <span>Add New Roaster</span>
            </button>
        </div>
        {{end}}
    </div>
    {{end}}

    {{if and (not .Beans) (not .Roasters)}}
    <div class="bg-gradient-to-br from-brown-100 to-brown-200 rounded-xl shadow-xl p-8 text-center text-brown-800 border border-brown-300">
        <p class="font-medium">No beans or roasters yet.</p>
    </div>
    {{end}}
</div>

<!-- Gear Tab -->
<div x-show="activeTab === 'gear'" x-cloak class="space-y-6">
    <!-- Grinders -->
    {{if .Grinders}}
    <div>
        <h3 class="text-lg font-semibold text-brown-900 mb-3">‚öôÔ∏è Grinders</h3>
        <div class="table-container overflow-x-auto">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th class="table-th">Name</th>
                        <th class="table-th">üîß Type</th>
                        <th class="table-th">üíé Burrs</th>
                        <th class="table-th">üìù Notes</th>
                    </tr>
                </thead>
                <tbody class="table-body">
                    {{range .Grinders}}
                    <tr class="table-row">
                        <td class="px-6 py-4 text-sm font-bold text-brown-900">{{.Name}}</td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .GrinderType}}{{.GrinderType}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .BurrType}}{{.BurrType}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-700 italic max-w-xs">
                            {{if .Notes}}{{.Notes}}{{else}}<span class="text-brown-400 not-italic">-</span>{{end}}
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{if $.IsOwnProfile}}
        <div class="mt-3 text-center">
            <button @click="editGrinder('', '', '', '', '')" class="inline-flex items-center gap-2 btn-primary text-sm shadow-md hover:shadow-lg">
                <span>+</span>
                <span>Add New Grinder</span>
            </button>
        </div>
        {{end}}
    </div>
    {{end}}

    <!-- Brewers -->
    {{if .Brewers}}
    <div>
        <h3 class="text-lg font-semibold text-brown-900 mb-3">‚òï Brewers</h3>
        <div class="table-container overflow-x-auto">
            <table class="table">
                <thead class="table-header">
                    <tr>
                        <th class="table-th">Name</th>
                        <th class="table-th">üîß Type</th>
                        <th class="table-th">üìù Description</th>
                    </tr>
                </thead>
                <tbody class="table-body">
                    {{range .Brewers}}
                    <tr class="table-row">
                        <td class="px-6 py-4 text-sm font-bold text-brown-900">{{.Name}}</td>
                        <td class="px-6 py-4 text-sm text-brown-900">
                            {{if .BrewerType}}{{.BrewerType}}{{else}}<span class="text-brown-400">-</span>{{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-brown-700 italic max-w-xs">
                            {{if .Description}}{{.Description}}{{else}}<span class="text-brown-400 not-italic">-</span>{{end}}
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{if $.IsOwnProfile}}
        <div class="mt-3 text-center">
            <button @click="editBrewer('', '', '', '')" class="inline-flex items-center gap-2 btn-primary text-sm shadow-md hover:shadow-lg">
                <span>+</span>
                <span>Add New Brewer</span>
            </button>
        </div>
        {{end}}
    </div>
    {{end}}

    {{if and (not .Grinders) (not .Brewers)}}
    <div class="bg-gradient-to-br from-brown-100 to-brown-200 rounded-xl shadow-xl p-8 text-center text-brown-800 border border-brown-300">
        <p class="font-medium">No gear added yet.</p>
    </div>
    {{end}}
</div>
{{end}}
