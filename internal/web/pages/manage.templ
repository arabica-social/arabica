package pages

import "arabica/internal/web/components"

// ManageProps defines the data for the manage page
type ManageProps struct{}

// Manage renders the full manage page
templ Manage(layout *components.LayoutData, props ManageProps) {
	@components.Layout(layout, ManageContent(props))
}

// ManageContent renders the manage page content
templ ManageContent(props ManageProps) {
	<script src="/static/js/manage-page.js?v=0.3.1"></script>
	<div class="max-w-6xl mx-auto" x-data="managePage()">
		<div class="flex items-center gap-3 mb-6">
			@components.BackButton()
			<h2 class="text-3xl font-bold text-brown-900">Manage</h2>
		</div>
		@ManageTabs()
		@ManageContentLoader()
	</div>
}

// ManageTabs renders the tab navigation
templ ManageTabs() {
	<div class="mb-6 border-b-2 border-brown-300">
		<nav class="-mb-px flex space-x-8">
			<button
				@click="tab = 'beans'"
				:class="tab === 'beans' ? 'border-brown-700 text-brown-900' : 'border-transparent text-brown-600 hover:text-brown-800 hover:border-brown-400'"
				class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"
			>
				Beans
			</button>
			<button
				@click="tab = 'roasters'"
				:class="tab === 'roasters' ? 'border-brown-700 text-brown-900' : 'border-transparent text-brown-600 hover:text-brown-800 hover:border-brown-400'"
				class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"
			>
				Roasters
			</button>
			<button
				@click="tab = 'grinders'"
				:class="tab === 'grinders' ? 'border-brown-700 text-brown-900' : 'border-transparent text-brown-600 hover:text-brown-800 hover:border-brown-400'"
				class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"
			>
				Grinders
			</button>
			<button
				@click="tab = 'brewers'"
				:class="tab === 'brewers' ? 'border-brown-700 text-brown-900' : 'border-transparent text-brown-600 hover:text-brown-800 hover:border-brown-400'"
				class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"
			>
				Brewers
			</button>
		</nav>
	</div>
}

// ManageContentLoader renders the HTMX content loader with skeleton
templ ManageContentLoader() {
	<div hx-get="/api/manage" hx-trigger="load, refreshManage from:body" hx-swap="innerHTML">
		@ManageLoadingSkeleton()
	</div>
}

// ManageLoadingSkeleton renders the loading skeleton
templ ManageLoadingSkeleton() {
	<div class="animate-pulse">
		<!-- Beans Tab Skeleton -->
		<div x-show="tab === 'beans'">
			<div class="mb-4 flex justify-between items-center">
				<h3 class="text-xl font-semibold text-brown-900">Coffee Beans</h3>
				<div class="h-10 bg-brown-300 rounded w-28"></div>
			</div>
			<div class="table-container overflow-x-auto">
				<table class="table">
					<thead class="table-header">
						<tr>
							<th class="table-th whitespace-nowrap">Name</th>
							<th class="table-th whitespace-nowrap">ğŸ“ Origin</th>
							<th class="table-th whitespace-nowrap">â˜• Roaster</th>
							<th class="table-th whitespace-nowrap">ğŸ”¥ Roast Level</th>
							<th class="table-th whitespace-nowrap">ğŸŒ± Process</th>
							<th class="table-th whitespace-nowrap">ğŸ“ Description</th>
							<th class="table-th whitespace-nowrap">Actions</th>
						</tr>
					</thead>
					<tbody class="table-body">
						for i := 0; i < 3; i++ {
							<tr class="table-row">
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-24"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-28"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-32"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-20"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-24"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-40"></div></td>
								<td class="px-6 py-4">
									<div class="flex gap-2">
										<div class="h-4 bg-brown-300 rounded w-10"></div>
										<div class="h-4 bg-brown-300 rounded w-12"></div>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
		<!-- Roasters Tab Skeleton -->
		<div x-show="tab === 'roasters'">
			<div class="mb-4 flex justify-between items-center">
				<h3 class="text-xl font-semibold text-brown-900">Roasters</h3>
				<div class="h-10 bg-brown-300 rounded w-28"></div>
			</div>
			<div class="table-container overflow-x-auto">
				<table class="table">
					<thead class="table-header">
						<tr>
							<th class="table-th whitespace-nowrap">Name</th>
							<th class="table-th whitespace-nowrap">ğŸ“ Location</th>
							<th class="table-th whitespace-nowrap">ğŸŒ Website</th>
							<th class="table-th whitespace-nowrap">Actions</th>
						</tr>
					</thead>
					<tbody class="table-body">
						for i := 0; i < 3; i++ {
							<tr class="table-row">
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-32"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-28"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-32"></div></td>
								<td class="px-6 py-4">
									<div class="flex gap-2">
										<div class="h-4 bg-brown-300 rounded w-10"></div>
										<div class="h-4 bg-brown-300 rounded w-12"></div>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
		<!-- Grinders Tab Skeleton -->
		<div x-show="tab === 'grinders'">
			<div class="mb-4 flex justify-between items-center">
				<h3 class="text-xl font-semibold text-brown-900">Grinders</h3>
				<div class="h-10 bg-brown-300 rounded w-28"></div>
			</div>
			<div class="table-container overflow-x-auto">
				<table class="table">
					<thead class="table-header">
						<tr>
							<th class="table-th whitespace-nowrap">Name</th>
							<th class="table-th whitespace-nowrap">Type</th>
							<th class="table-th whitespace-nowrap">Burr Type</th>
							<th class="table-th whitespace-nowrap">Notes</th>
							<th class="table-th whitespace-nowrap">Actions</th>
						</tr>
					</thead>
					<tbody class="table-body">
						for i := 0; i < 3; i++ {
							<tr class="table-row">
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-28"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-20"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-20"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-32"></div></td>
								<td class="px-6 py-4">
									<div class="flex gap-2">
										<div class="h-4 bg-brown-300 rounded w-10"></div>
										<div class="h-4 bg-brown-300 rounded w-12"></div>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
		<!-- Brewers Tab Skeleton -->
		<div x-show="tab === 'brewers'">
			<div class="mb-4 flex justify-between items-center">
				<h3 class="text-xl font-semibold text-brown-900">Brewing Devices</h3>
				<div class="h-10 bg-brown-300 rounded w-28"></div>
			</div>
			<div class="table-container overflow-x-auto">
				<table class="table">
					<thead class="table-header">
						<tr>
							<th class="table-th whitespace-nowrap">Name</th>
							<th class="table-th whitespace-nowrap">Description</th>
							<th class="table-th whitespace-nowrap">Actions</th>
						</tr>
					</thead>
					<tbody class="table-body">
						for i := 0; i < 3; i++ {
							<tr class="table-row">
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-28"></div></td>
								<td class="px-6 py-4"><div class="h-4 bg-brown-300 rounded w-48"></div></td>
								<td class="px-6 py-4">
									<div class="flex gap-2">
										<div class="h-4 bg-brown-300 rounded w-10"></div>
										<div class="h-4 bg-brown-300 rounded w-12"></div>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
}
