{{define "content"}}
<div class="max-w-6xl mx-auto">
    <div class="mb-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">Your Brews</h2>
        <div class="flex flex-col sm:flex-row gap-4">
            <a href="/brews/new"
                class="bg-brown-600 text-white py-2 px-4 rounded hover:bg-brown-700 transition text-center">
                ‚ûï New Brew
            </a>
            <a href="/brews/export"
                class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition text-center">
                üì• Export JSON
            </a>
        </div>
    </div>

    {{if not .Brews}}
    <div class="bg-white rounded-lg shadow-md p-8 text-center">
        <p class="text-gray-600 text-lg mb-4">No brews yet! Start tracking your coffee journey.</p>
        <a href="/brews/new"
            class="inline-block bg-brown-600 text-white py-3 px-6 rounded-lg hover:bg-brown-700 transition">
            Add Your First Brew
        </a>
    </div>
    {{else}}
    <div class="overflow-x-auto bg-white rounded-lg shadow-md">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bean</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Roaster</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Method</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rating</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {{range .Brews}}
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{.CreatedAt.Format "Jan 2, 2006"}}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        {{if .Bean.Name}}
                        <div class="font-medium">{{.Bean.Name}}</div>
                        <div class="text-gray-500 text-xs">{{.Bean.Origin}} - {{.Bean.RoastLevel}}</div>
                        {{else}}
                        <div class="font-medium">{{.Bean.Origin}}</div>
                        <div class="text-gray-500">{{.Bean.RoastLevel}}</div>
                        {{end}}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        {{if and .Bean .Bean.Roaster .Bean.Roaster.Name}}
                        {{.Bean.Roaster.Name}}
                        {{else}}
                        <span class="text-gray-400">-</span>
                        {{end}}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div>{{.Method}}</div>
                        <div class="text-gray-500 text-xs">
                            {{.TempFormatted}} ‚Ä¢ {{.TimeFormatted}}
                        </div>
                        {{if .Pours}}
                        <div class="text-gray-500 text-xs mt-1">
                            {{len .Pours}} pours
                        </div>
                        {{end}}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                            ‚≠ê {{.RatingFormatted}}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <a href="/brews/{{.ID}}"
                            class="text-blue-600 hover:text-blue-900">View</a>
                        <button hx-delete="/brews/{{.ID}}"
                            hx-confirm="Are you sure you want to delete this brew?" hx-target="closest tr"
                            hx-swap="outerHTML swap:1s" class="text-red-600 hover:text-red-900">
                            Delete
                        </button>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
    {{end}}
</div>
{{end}}
