---
title: new brew with populated selects
test_name: TestBrewForm_NewBrew_Snapshot/new_brew_with_populated_selects
file_name: form_template_snapshot_test.go
version: 0.1.0
---
<script src="/static/js/brew-form.js"></script>
<div class="max-w-2xl mx-auto">
  <div class="bg-gradient-to-br from-brown-100 to-brown-200 rounded-xl shadow-xl p-8 border border-brown-300">
    <h2 class="text-3xl font-bold text-brown-900 mb-6">
      New Brew
    </h2>
    <form 
            
            hx-post="/brews"
            
            hx-target="body"
            class="space-y-6"
            x-data="brewForm()"
            >
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Coffee Bean
        </label>
        <div class="flex gap-2">
          <select 
                        name="bean_rkey" 
                        required
                        class="flex-1 rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 truncate max-w-full bg-white">
            <option value="">
              Select a bean...
            </option>
            <option 
                            value="bean1"
                            
                            class="truncate">
              Ethiopian Yirgacheffe (Ethiopia - Light)
            </option>
            <option 
                            value="bean2"
                            
                            class="truncate">
              Colombia - Medium
            </option>
          </select>
          <button 
                        type="button"
                        @click="showNewBean = true"
                        class="bg-brown-300 text-brown-900 px-4 py-2 rounded-lg hover:bg-brown-400 font-medium transition-colors">
            + New
          </button>
        </div>
        <div x-show="showNewBean" class="mt-4 p-4 bg-brown-100 rounded border border-brown-300">
          <h4 class="font-medium mb-3 text-gray-800">
            Add New Bean
          </h4>
          <div class="space-y-3">
            <input type="text" x-model="newBean.name" placeholder="Name (e.g. Morning Blend, House Espresso) *" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <input type="text" x-model="newBean.origin" placeholder="Origin (e.g. Ethiopia) *" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <select x-model="newBean.roasterRKey" name="roaster_rkey_modal" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3">
              <option value="">
                Select Roaster (Optional)
              </option>
              <option value="roaster1">
                Blue Bottle
              </option>
              <option value="roaster2">
                Counter Culture
              </option>
            </select>
            <select x-model="newBean.roastLevel" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3">
              <option value="">
                Select Roast Level (Optional)
              </option>
              <option value="Ultra-Light">
                Ultra-Light
              </option>
              <option value="Light">
                Light
              </option>
              <option value="Medium-Light">
                Medium-Light
              </option>
              <option value="Medium">
                Medium
              </option>
              <option value="Medium-Dark">
                Medium-Dark
              </option>
              <option value="Dark">
                Dark
              </option>
            </select>
            <input type="text" x-model="newBean.process" placeholder="Process (e.g. Washed, Natural, Honey)" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <input type="text" x-model="newBean.description" placeholder="Description (optional)" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <div class="flex gap-2">
              <button type="button" @click="addBean()" class="bg-brown-600 text-white px-4 py-2 rounded hover:bg-brown-700">
                Add
              </button>
              <button type="button" @click="showNewBean = false" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Coffee Amount (grams)
        </label>
        <input 
                    type="number" 
                    name="coffee_amount" 
                    step="0.1"
                    
                    placeholder="e.g. 18"
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"/>
        <p class="text-sm text-brown-700 mt-1">
          Amount of ground coffee used
        </p>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Grinder
        </label>
        <div class="flex gap-2">
          <select 
                        name="grinder_rkey"
                        class="flex-1 rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 truncate max-w-full bg-white">
            <option value="">
              Select a grinder...
            </option>
            <option 
                            value="grinder1"
                            
                            class="truncate">
              Baratza Encore
            </option>
            <option 
                            value="grinder2"
                            
                            class="truncate">
              Comandante C40
            </option>
          </select>
          <button 
                        type="button"
                        @click="showNewGrinder = true"
                        class="bg-brown-300 text-brown-900 px-4 py-2 rounded-lg hover:bg-brown-400 font-medium transition-colors">
            + New
          </button>
        </div>
        <div x-show="showNewGrinder" class="mt-4 p-4 bg-brown-100 rounded border border-brown-300">
          <h4 class="font-medium mb-3 text-gray-800">
            Add New Grinder
          </h4>
          <div class="space-y-3">
            <input type="text" x-model="newGrinder.name" placeholder="Name (e.g. Baratza Encore) *" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <select x-model="newGrinder.grinderType" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3">
              <option value="">
                Grinder Type (Optional)
              </option>
              <option value="Hand">
                Hand
              </option>
              <option value="Electric">
                Electric
              </option>
              <option value="Electric Hand">
                Electric Hand
              </option>
            </select>
            <select x-model="newGrinder.burrType" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3">
              <option value="">
                Burr Type (Optional)
              </option>
              <option value="Conical">
                Conical
              </option>
              <option value="Flat">
                Flat
              </option>
            </select>
            <input type="text" x-model="newGrinder.notes" placeholder="Notes (optional)" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <div class="flex gap-2">
              <button type="button" @click="addGrinder()" class="bg-brown-600 text-white px-4 py-2 rounded hover:bg-brown-700">
                Add
              </button>
              <button type="button" @click="showNewGrinder = false" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Grind Size
        </label>
        <input 
                    type="text" 
                    name="grind_size" 
                    
                    placeholder="e.g. 18, Medium, 3.5, Fine"
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"/>
        <p class="text-sm text-brown-700 mt-1">
          Enter a number (grinder setting) or description (e.g. "Medium", "Fine")
        </p>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Brew Method
        </label>
        <div class="flex gap-2">
          <select 
                        name="brewer_rkey"
                        class="flex-1 rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 truncate max-w-full bg-white">
            <option value="">
              Select brew method...
            </option>
            <option 
                            value="brewer1"
                            
                            class="truncate">
              Hario V60
            </option>
            <option 
                            value="brewer2"
                            
                            class="truncate">
              AeroPress
            </option>
          </select>
          <button 
                        type="button"
                        @click="showNewBrewer = true"
                        class="bg-brown-300 text-brown-900 px-4 py-2 rounded-lg hover:bg-brown-400 font-medium transition-colors">
            + New
          </button>
        </div>
        <div x-show="showNewBrewer" class="mt-4 p-4 bg-brown-100 rounded border border-brown-300">
          <h4 class="font-medium mb-3 text-gray-800">
            Add New Brewer
          </h4>
          <div class="space-y-3">
            <input type="text" x-model="newBrewer.name" placeholder="Name (e.g. V60, AeroPress) *" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <input type="text" x-model="newBrewer.brewer_type" placeholder="Type (e.g. Pour-Over, Immersion)" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <input type="text" x-model="newBrewer.description" placeholder="Description (optional)" class="w-full rounded-md border-gray-300 bg-white shadow-sm py-2 px-3"/>
            <div class="flex gap-2">
              <button type="button" @click="addBrewer()" class="bg-brown-600 text-white px-4 py-2 rounded hover:bg-brown-700">
                Add
              </button>
              <button type="button" @click="showNewBrewer = false" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Water Amount (grams)
        </label>
        <input 
                    type="number" 
                    name="water_amount" 
                    step="1"
                    
                    placeholder="e.g. 250"
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"/>
        <p class="text-sm text-brown-700 mt-1">
          Total water used (or leave empty if using pours below)
        </p>
      </div>
      <div>
        <div class="flex items-center justify-between mb-2">
          <label class="block text-sm font-medium text-brown-900">
            Pours (Optional)
          </label>
          <button 
                        type="button"
                        @click="addPour()"
                        class="text-sm bg-brown-300 text-brown-900 px-3 py-1 rounded-lg hover:bg-brown-400 font-medium transition-colors">
            + Add Pour
          </button>
        </div>
        <p class="text-sm text-brown-700 mb-3">
          Track individual pours for bloom and subsequent additions
        </p>
        <div class="space-y-3">
          <template x-for="(pour, index) in pours" :key="index">
            <div class="flex gap-2 items-center bg-brown-50 p-3 rounded-lg border border-brown-200">
              <div class="flex-1">
                <label class="text-xs text-brown-700 font-medium" x-text="'Pour ' + (index + 1)"></label>
                <input 
                                    type="number"
                                    :name="'pour_water_' + index"
                                    x-model="pour.water"
                                    placeholder="Water (g)"
                                    class="w-full rounded-md border-brown-300 text-sm py-2 px-3 mt-1 bg-white"/>
              </div>
              <div class="flex-1">
                <label class="text-xs text-brown-700 font-medium">
                  Time (sec)
                </label>
                <input 
                                    type="number"
                                    :name="'pour_time_' + index"
                                    x-model="pour.time"
                                    placeholder="e.g. 45"
                                    class="w-full rounded-md border-brown-300 text-sm py-2 px-3 mt-1 bg-white"/>
              </div>
              <button 
                                type="button"
                                @click="removePour(index)"
                                class="text-brown-700 hover:text-brown-900 mt-5 font-bold"
                                x-show="pours.length > 0">
                âœ•
              </button>
            </div>
          </template>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Temperature
        </label>
        <input 
                    type="number" 
                    name="temperature" 
                    step="0.1"
                    
                    placeholder="e.g. 93.5"
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"/>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Brew Time (seconds)
        </label>
        <input 
                    type="number" 
                    name="time_seconds" 
                    
                    placeholder="e.g. 180"
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"/>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Tasting Notes
        </label>
        <textarea 
                    name="tasting_notes" 
                    rows="4"
                    placeholder="Describe the flavors, aroma, and your thoughts..."
                    class="w-full rounded-lg border-2 border-brown-300 shadow-sm focus:border-brown-600 focus:ring-brown-600 text-base py-3 px-4 bg-white"></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium text-brown-900 mb-2">
          Rating
        </label>
        <input 
                    type="range" 
                    name="rating" 
                    min="1" 
                    max="10" 
                    value="5"
                    x-model="rating"
                    x-init="rating = $el.value"
                    class="w-full accent-brown-700"/>
        <div class="text-center text-2xl font-bold text-brown-800">
          <span x-text="rating"></span>
          /10
        </div>
      </div>
      <div>
        <button 
                    type="submit"
                    class="w-full bg-gradient-to-r from-brown-700 to-brown-800 text-white py-3 px-6 rounded-xl hover:from-brown-800 hover:to-brown-900 transition-all font-semibold text-lg shadow-lg hover:shadow-xl">
          Save Brew
        </button>
      </div>
    </form>
  </div>
</div>